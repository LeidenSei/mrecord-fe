<div class="view-wrapper assessment-page">
  <div class="assessment-toolbar">
    <div class="toolbar-header">
      <i class="icon-assessment"></i>
      <span class="header-title">ƒê√°nh gi√° gi·ªØa k·ª≥</span>
      <span class="count-badge">{{studentCount || 48}}</span>
    </div>
    
    <div class="toolbar-filters">
      <div class="filter-group">
        <label>Kh·ªëi h·ªçc</label>
        <select class="filter-select" (change)="gradeChange($event)">
          <option *ngFor="let grade of gradeSource" [value]="grade">{{grade}}</option>
        </select>
      </div>
      
      <div class="filter-group">
        <label>L·ªõp h·ªçc</label>
        <select class="filter-select" [(ngModel)]="filterClassId" (change)="classChange($event)">
          <option *ngFor="let cls of filterClassSource" [value]="cls.id">{{cls.name}}</option>
        </select>
      </div>
      
      <button class="btn-export" (click)="onExporting($event)">
        <i class="icon-export"></i>
        Xu·∫•t Excel
      </button>
    </div>
  </div>

  <!-- B·∫£ng 1: M√¥n h·ªçc v√† ho·∫°t ƒë·ªông gi√°o d·ª•c -->
  <div class="grid-container">
    <div class="section-header subjects-header">
      <span class="section-number">1</span>
      <span class="section-title">M√¥n h·ªçc v√† ho·∫°t ƒë·ªông gi√°o d·ª•c</span>
    </div>
    
    <ag-grid-angular
      class="ag-theme-alpine assessment-grid"
      [gridOptions]="subjectsGridOptions"
      [rowData]="subjectsData"
      [columnDefs]="subjectsGridOptions.columnDefs"
      style="width: 100%; height: 500px;"
      [animateRows]="true"
      [enableRangeSelection]="true"
      [suppressMovableColumns]="true"
    ></ag-grid-angular>
  </div>

  <!-- B·∫£ng 2: Ph·∫©m ch·∫•t ch·ªß y·∫øu -->
  <div class="grid-container">
    <div class="section-header qualities-header">
      <span class="section-number">2</span>
      <span class="section-title">Ph·∫©m ch·∫•t ch·ªß y·∫øu</span>
    </div>
    
    <ag-grid-angular
      class="ag-theme-alpine assessment-grid"
      [gridOptions]="qualitiesGridOptions"
      [rowData]="qualitiesData"
      [columnDefs]="qualitiesGridOptions.columnDefs"
      style="width: 100%; height: 300px;"
      [animateRows]="true"
      [enableRangeSelection]="true"
      [suppressMovableColumns]="true"
    ></ag-grid-angular>
  </div>

  <!-- B·∫£ng 3: NƒÉng l·ª±c c·ªët l√µi -->
  <div class="grid-container">
    <div class="section-header competencies-header">
      <span class="section-number">3</span>
      <span class="section-title">NƒÉng l·ª±c c·ªët l√µi</span>
    </div>
    
    <ag-grid-angular
      class="ag-theme-alpine assessment-grid"
      [gridOptions]="competenciesGridOptions"
      [rowData]="competenciesData"
      [columnDefs]="competenciesGridOptions.columnDefs"
      style="width: 100%; height: 450px;"
      [animateRows]="true"
      [enableRangeSelection]="true"
      [suppressMovableColumns]="true"
    ></ag-grid-angular>
  </div>
  <!-- Ph·∫ßn 4: ƒê√°nh gi√° k·∫øt qu·∫£ gi√°o d·ª•c -->
<div style="background: white; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); margin-bottom: 24px;">
  <div style="padding: 16px 24px; display: flex; align-items: center; gap: 12px; background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%); border-radius: 8px 8px 0 0;">
    <span style="width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; background: linear-gradient(135deg, #ff9a56 0%, #ff6a3d 100%); font-weight: 700;">4</span>
    <span style="font-size: 18px; font-weight: 600; color: #8b4513;">ƒê√°nh gi√° k·∫øt qu·∫£ gi√°o d·ª•c</span>
  </div>
  
  <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; padding: 24px;">
    <!-- Ho√†n th√†nh xu·∫•t s·∫Øc -->
    <div style="background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%); border: 2px solid #10b981; border-radius: 12px; padding: 20px; display: flex; gap: 16px; align-items: center;">
      <div style="font-size: 36px; width: 60px; text-align: center;">üåü</div>
      <div style="flex: 1;">
        <h3 style="margin: 0 0 12px 0; font-size: 15px; font-weight: 600; color: #065f46;">Ho√†n th√†nh xu·∫•t s·∫Øc</h3>
        <div style="display: flex; gap: 20px;">
          <div>
            <div style="font-size: 24px; font-weight: 700; color: #10b981;">31</div>
            <div style="font-size: 12px; color: #64748b;">S·ªë l∆∞·ª£ng</div>
          </div>
          <div>
            <div style="font-size: 24px; font-weight: 700; color: #10b981;">70.8%</div>
            <div style="font-size: 12px; color: #64748b;">T·ªâ l·ªá</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Ho√†n th√†nh t·ªët -->
    <div style="background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%); border: 2px solid #3b82f6; border-radius: 12px; padding: 20px; display: flex; gap: 16px; align-items: center;">
      <div style="font-size: 36px; width: 60px; text-align: center;">‚≠ê</div>
      <div style="flex: 1;">
        <h3 style="margin: 0 0 12px 0; font-size: 15px; font-weight: 600; color: #1e40af;">Ho√†n th√†nh t·ªët</h3>
        <div style="display: flex; gap: 20px;">
          <div>
            <div style="font-size: 24px; font-weight: 700; color: #3b82f6;">0</div>
            <div style="font-size: 12px; color: #64748b;">S·ªë l∆∞·ª£ng</div>
          </div>
          <div>
            <div style="font-size: 24px; font-weight: 700; color: #3b82f6;">0%</div>
            <div style="font-size: 12px; color: #64748b;">T·ªâ l·ªá</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Ho√†n th√†nh -->
    <div style="background: linear-gradient(135deg, #f5f3ff 0%, #ede9fe 100%); border: 2px solid #8b5cf6; border-radius: 12px; padding: 20px; display: flex; gap: 16px; align-items: center;">
      <div style="font-size: 36px; width: 60px; text-align: center;">‚úì</div>
      <div style="flex: 1;">
        <h3 style="margin: 0 0 12px 0; font-size: 15px; font-weight: 600; color: #5b21b6;">Ho√†n th√†nh</h3>
        <div style="display: flex; gap: 20px;">
          <div>
            <div style="font-size: 24px; font-weight: 700; color: #8b5cf6;">0</div>
            <div style="font-size: 12px; color: #64748b;">S·ªë l∆∞·ª£ng</div>
          </div>
          <div>
            <div style="font-size: 24px; font-weight: 700; color: #8b5cf6;">0%</div>
            <div style="font-size: 12px; color: #64748b;">T·ªâ l·ªá</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Ch∆∞a ho√†n th√†nh -->
    <div style="background: linear-gradient(135deg, #fff7ed 0%, #fed7aa 100%); border: 2px solid #fb923c; border-radius: 12px; padding: 20px; display: flex; gap: 16px; align-items: center;">
      <div style="font-size: 36px; width: 60px; text-align: center;">‚ö†</div>
      <div style="flex: 1;">
        <h3 style="margin: 0 0 12px 0; font-size: 15px; font-weight: 600; color: #9a3412;">Ch∆∞a ho√†n th√†nh</h3>
        <div style="display: flex; gap: 20px;">
          <div>
            <div style="font-size: 24px; font-weight: 700; color: #fb923c;">0</div>
            <div style="font-size: 12px; color: #64748b;">S·ªë l∆∞·ª£ng</div>
          </div>
          <div>
            <div style="font-size: 24px; font-weight: 700; color: #fb923c;">0%</div>
            <div style="font-size: 12px; color: #64748b;">T·ªâ l·ªá</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Ph·∫ßn 5: Khen th∆∞·ªüng -->
<div style="background: white; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); margin-bottom: 24px;">
  <div style="padding: 16px 24px; display: flex; align-items: center; gap: 12px; background: linear-gradient(135deg, #fa709a 0%, #fee140 100%); border-radius: 8px 8px 0 0;">
    <span style="width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); font-weight: 700;">5</span>
    <span style="font-size: 18px; font-weight: 600; color: #7c2d12;">Khen th∆∞·ªüng</span>
  </div>
  
  <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; padding: 24px;">
    <!-- H·ªçc sinh xu·∫•t s·∫Øc -->
    <div style="background: white; border: 2px solid #fbbf24; border-radius: 12px; padding: 24px; box-shadow: 0 4px 12px rgba(0,0,0,0.08);">
      <div style="display: flex; align-items: center; gap: 20px;">
        <div style="font-size: 48px;">üèÜ</div>
        <div style="flex: 1;">
          <h3 style="margin: 0 0 16px 0; font-size: 16px; font-weight: 600; color: #1e293b;">H·ªçc sinh xu·∫•t s·∫Øc</h3>
          <div style="display: flex; gap: 24px;">
            <div>
              <div style="font-size: 28px; font-weight: 700; color: #f59e0b;">31</div>
              <div style="font-size: 12px; color: #64748b;">S·ªë l∆∞·ª£ng</div>
            </div>
            <div>
              <div style="font-size: 28px; font-weight: 700; color: #f59e0b;">70.8%</div>
              <div style="font-size: 12px; color: #64748b;">T·ªâ l·ªá</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- H·ªçc sinh ti√™u bi·ªÉu -->
    <div style="background: white; border: 2px solid #ec4899; border-radius: 12px; padding: 24px; box-shadow: 0 4px 12px rgba(0,0,0,0.08);">
      <div style="display: flex; align-items: center; gap: 20px;">
        <div style="font-size: 48px;">üéñÔ∏è</div>
        <div style="flex: 1;">
          <h3 style="margin: 0 0 16px 0; font-size: 16px; font-weight: 600; color: #1e293b;">H·ªçc sinh ti√™u bi·ªÉu</h3>
          <div style="display: flex; gap: 24px;">
            <div>
              <div style="font-size: 28px; font-weight: 700; color: #ec4899;">0</div>
              <div style="font-size: 12px; color: #64748b;">S·ªë l∆∞·ª£ng</div>
            </div>
            <div>
              <div style="font-size: 28px; font-weight: 700; color: #ec4899;">0%</div>
              <div style="font-size: 12px; color: #64748b;">T·ªâ l·ªá</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Th√†nh t√≠ch ƒë·ªôt xu·∫•t -->
    <div style="background: white; border: 2px solid #8b5cf6; border-radius: 12px; padding: 24px; box-shadow: 0 4px 12px rgba(0,0,0,0.08);">
      <div style="display: flex; align-items: center; gap: 20px;">
        <div style="font-size: 48px;">üéØ</div>
        <div style="flex: 1;">
          <h3 style="margin: 0 0 16px 0; font-size: 16px; font-weight: 600; color: #1e293b;">H·ªçc sinh c√≥ th√†nh t√≠ch ƒë·ªôt xu·∫•t</h3>
          <div style="display: flex; gap: 24px;">
            <div>
              <div style="font-size: 28px; font-weight: 700; color: #8b5cf6;">0</div>
              <div style="font-size: 12px; color: #64748b;">S·ªë l∆∞·ª£ng</div>
            </div>
            <div>
              <div style="font-size: 28px; font-weight: 700; color: #8b5cf6;">0%</div>
              <div style="font-size: 12px; color: #64748b;">T·ªâ l·ªá</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Ph·∫ßn 6: Ho√†n th√†nh ch∆∞∆°ng tr√¨nh -->
<div style="background: white; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); margin-bottom: 24px;">
  <div style="padding: 16px 24px; display: flex; align-items: center; gap: 12px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 8px 8px 0 0; color: white;">
    <span style="width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); font-weight: 700;">6</span>
    <span style="font-size: 18px; font-weight: 600;">Ho√†n th√†nh ch∆∞∆°ng tr√¨nh l·ªõp h·ªçc / Ti·ªÉu h·ªçc</span>
  </div>
  
  <div style="padding: 40px 24px; display: flex; justify-content: center;">
    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 16px; padding: 40px; display: flex; align-items: center; gap: 40px; max-width: 600px; box-shadow: 0 8px 24px rgba(102,126,234,0.3);">
      <div style="position: relative; width: 120px; height: 120px; flex-shrink: 0;">
        <svg width="120" height="120" style="transform: rotate(-90deg);">
          <circle cx="60" cy="60" r="50" fill="none" stroke="rgba(255,255,255,0.2)" stroke-width="10"/>
          <circle cx="60" cy="60" r="50" fill="none" stroke="white" stroke-width="10" 
                  stroke-dasharray="314" stroke-dashoffset="0" stroke-linecap="round"/>
        </svg>
        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 32px; font-weight: 700; color: white;">100%</div>
      </div>
      <div style="flex: 1; color: white;">
        <div style="margin-bottom: 24px;">
          <div style="font-size: 48px; font-weight: 700; line-height: 1; margin-bottom: 8px;">48</div>
          <div style="font-size: 16px; opacity: 0.95;">S·ªë l∆∞·ª£ng h·ªçc sinh</div>
        </div>
        <div>
          <div style="font-size: 36px; font-weight: 700; line-height: 1; margin-bottom: 8px;">100%</div>
          <div style="font-size: 16px; opacity: 0.95;">T·ªâ l·ªá ho√†n th√†nh</div>
        </div>
      </div>
    </div>
  </div>
</div>
</div>