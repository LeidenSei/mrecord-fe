<div class="view-wrapper list-page crm-contact-list">
  <dx-load-panel
    [visible]="isLoading"
    shadingColor="rgba(0,0,0,0.4)"
    [showIndicator]="true"
    [showPane]="true"
    [shading]="true"
    [closeOnOutsideClick]="false"
    message="Đang tải dữ liệu..."
  ></dx-load-panel>
  <dx-data-grid
    class="grid theme-dependent"
    noDataText=""
    columnResizingMode="widget"
    [dataSource]="datas"
    [allowColumnReordering]="true"
    [showBorders]="true"
    [showColumnLines]="true"
    [showRowLines]="true"
    [columnMinWidth]="50"
    [columnAutoWidth]="true"
    [columnResizingMode]="'nextColumn'"
    [allowColumnResizing]="true"
    (onExporting)="onExporting($event)"
  >
    <dxo-selection
      mode="single">
    </dxo-selection>
    <dxo-scrolling mode="virtual" rowRenderingMode="virtual"></dxo-scrolling>
    <dxo-load-panel [showPane]="false" [enabled]="false"></dxo-load-panel>

    <dxo-sorting mode="multiple"></dxo-sorting>
    <dxo-header-filter [visible]="true"></dxo-header-filter>
    <dxo-column-chooser [enabled]="true"></dxo-column-chooser>
    <dxo-export
      [enabled]="true"
      [texts]="exportTexts"
      showText="always"
      [allowExportSelectedData]="false"
      [formats]="['xlsx']"
    >
    </dxo-export>
    <dxo-toolbar>
      <dxi-item location="before">
        <div class="grid-header">
          <i class="dx-icon-textdocument" style="font-size: 16px"></i>
          Thống kê bài giảng giáo viên
        </div>
      </dxi-item>
      <dxi-item location="before">
        <dx-date-box
          [(value)]="fromDate"
          placeholder="Từ ngày"
          type="date"
          displayFormat="dd/MM/yyyy"
          [showClearButton]="true"
        ></dx-date-box>
      </dxi-item>
      <dxi-item location="before">
        <dx-date-box
          [(value)]="toDate"
          placeholder="Đến ngày"
          type="date"
          displayFormat="dd/MM/yyyy"
          [showClearButton]="true"
        ></dx-date-box>
      </dxi-item>
      <dxi-item location="before">
        <dx-button text="Áp dụng" (onClick)="applyDateFilter()"></dx-button>
      </dxi-item>
      <dxi-item name="exportButton" locateInMenu="auto"></dxi-item>
    </dxo-toolbar>
    <dxi-column
      caption="STT"
      [width]="65"
      alignment="center"
      dataField="stt"
      [allowFiltering]="false"
      [allowSorting]="false"
    ></dxi-column>
    <dxi-column caption="Họ và tên GV" dataField="hoTen"></dxi-column>
    <dxi-column caption="Lớp" dataField="lop"></dxi-column>
    <dxi-column caption="Tổng số khóa học" dataField="soKhoaHoc"></dxi-column>
    <dxi-column caption="Tổng số bài giảng" dataField="soBaiGiang"></dxi-column>
    <dxi-column caption="Tổng số bài tập về nhà" dataField="soBTVN"></dxi-column>
    <dxi-column caption="Tổng số bài TN trực tuyến" dataField="soDeThiTNTT"></dxi-column>
    <dxi-column type="buttons" fixedPosition="right" caption="Chi tiết" [fixed]="true" >
      <dxi-button
        hint="Chi tiết"
        cssClass="dx-button-success"
        [onClick]="onDetailClick"
        icon="info"
      ></dxi-button>
    </dxi-column>
    <dxo-summary>
      <dxi-total-item
        summaryType="sum"
        *ngFor="let col of dynamicColumns"
        [column]="col"
        valueFormat="decimal"
        displayFormat="Tổng: {0}"
      ></dxi-total-item>
      <dxi-total-item
        summaryType="sum"
        column="tongSoKhoaHoc"
        valueFormat="decimal"
        displayFormat="Tổng: {0}"
      ></dxi-total-item>
    </dxo-summary>
  </dx-data-grid>
</div>
<dx-popup
  [cssClass]="'custom-popup-class'"
  [title]="viewResultTitle"
  [(visible)]="isShowResultView"
  [fullScreen]="!!(screen.xSmallScreenChanged | async)"
  width="100%"
  height="100%"
>
  <div class="row detail-3">
    <div class="col-md-4">
      <h5>Danh sách khóa học/bài giảng ({{dataItem.soBaiGiang}})</h5>
      <dx-data-grid
        class="grid theme-dependent"
        columnResizingMode="widget"
        [dataSource]="dataItem.baiGiangItems"
        [showBorders]="true"
        [showRowLines]="true"
        [columnMinWidth]="50"
        [height]="wHeight"
        width="100%"
        [columnResizingMode]="'nextColumn'"
        [allowColumnResizing]="true"
        (onExporting)="onExporting($event)"
      >

        <dxo-paging [enabled]="true" [pageSize]="1000"></dxo-paging>
        <dxo-load-panel [showPane]="false" [enabled]="false"></dxo-load-panel>
        <dxo-selection
          mode="single">
        </dxo-selection>
        <dxo-scrolling mode="standard"></dxo-scrolling>

        <dxo-header-filter [visible]="false"></dxo-header-filter>

        <dxi-column
          fixedPosition="left" dataField="index" alignment="center" [allowFiltering]="false" [width]="60" caption="STT"
        ></dxi-column>
        <dxi-column dataField="khoaHocName" [width]="200" caption="Khóa học"></dxi-column>
        <dxi-column dataField="name" caption="Bài giảng" [width]="200"></dxi-column>
        <dxi-column dataField="dateCreated" dataType="date"
                    format="HH:mm dd/MM/yyyy" caption="Ngày tạo" [width]="120"></dxi-column>
        <!--<dxi-column dataField="subjectName" [allowFiltering]="false" caption="Môn học" [width]="110"></dxi-column>
        <dxi-column dataField="className" [allowFiltering]="false" cellTemplate="cellClasses" caption="Lớp" cssClass="white-space-normal"
                    [width]="100"></dxi-column>-->
      </dx-data-grid>
    </div>
    <div class="col-md-4">
      <h5>Danh sách bài tập về nhà ({{dataItem.soBTVN}})</h5>
      <dx-data-grid
        class="grid theme-dependent"
        columnResizingMode="widget"
        [dataSource]="dataItem.btvnItems"
        [showBorders]="true"
        [showRowLines]="true"
        [columnMinWidth]="50"
        [height]="wHeight"
        width="100%"
        [columnResizingMode]="'nextColumn'"
        [allowColumnResizing]="true"
        (onExporting)="onExporting($event)"
      >
        <!--<dxo-export
          [enabled]="true"
          [texts]="exportTexts"
          showText="always"
          [allowExportSelectedData]="false"
          [formats]="['xlsx']"
        >
        </dxo-export>-->
        <dxo-paging [enabled]="true" [pageSize]="1000"></dxo-paging>
        <dxo-load-panel [showPane]="false" [enabled]="false"></dxo-load-panel>
        <dxo-selection
          mode="single">
        </dxo-selection>
        <dxo-scrolling mode="standard"></dxo-scrolling>

        <dxo-header-filter [visible]="false"></dxo-header-filter>

        <dxi-column
          fixedPosition="left" dataField="index" alignment="center" [allowFiltering]="false" [width]="60" caption="STT"
        ></dxi-column>
        <dxi-column dataField="name" caption="Bài tập về nhà" [width]="200"></dxi-column>
        <dxi-column dataField="dateCreated" dataType="date"
                    format="HH:mm dd/MM/yyyy" caption="Ngày tạo" [width]="120"></dxi-column>
        <!--<dxi-column dataField="subjectName" [allowFiltering]="false" caption="Môn học" [width]="110"></dxi-column>
        <dxi-column dataField="className" [allowFiltering]="false" cellTemplate="cellClasses" caption="Lớp" cssClass="white-space-normal"
                    [width]="100"></dxi-column>-->
      </dx-data-grid>
    </div>
    <div class="col-md-4">
      <h5>Danh sách đề Trắc nghiệm trực tuyến ({{dataItem.soDeThiTNTT}})</h5>
      <dx-data-grid
        class="grid theme-dependent"
        columnResizingMode="widget"
        [dataSource]="dataItem.examPaperItems"
        [showBorders]="true"
        [showRowLines]="true"
        [columnMinWidth]="50"
        [height]="wHeight"
        width="100%"
        [columnResizingMode]="'nextColumn'"
        [allowColumnResizing]="true"
        (onExporting)="onExporting($event)"
      >
        <!--<dxo-export
          [enabled]="true"
          [texts]="exportTexts"
          showText="always"
          [allowExportSelectedData]="false"
          [formats]="['xlsx']"
        >
        </dxo-export>-->
        <dxo-paging [enabled]="true" [pageSize]="1000"></dxo-paging>
        <dxo-load-panel [showPane]="false" [enabled]="false"></dxo-load-panel>
        <dxo-selection
          mode="single">
        </dxo-selection>
        <dxo-scrolling mode="standard"></dxo-scrolling>

        <dxo-header-filter [visible]="false"></dxo-header-filter>

        <dxi-column
          fixedPosition="left" dataField="index" alignment="center" [allowFiltering]="false" [width]="60" caption="STT"
        ></dxi-column>
        <dxi-column dataField="name" caption="Trắc nghiệm trực tuyến" [width]="200"></dxi-column>
        <dxi-column dataField="dateCreated" dataType="date"
                    format="HH:mm dd/MM/yyyy" caption="Ngày tạo" [width]="120"></dxi-column>
        <!--<dxi-column dataField="subjectName" [allowFiltering]="false" caption="Môn học" [width]="110"></dxi-column>
        <dxi-column dataField="className" [allowFiltering]="false" cellTemplate="cellClasses" caption="Lớp" cssClass="white-space-normal"
                    [width]="100"></dxi-column>-->
      </dx-data-grid>
    </div>
  </div>

</dx-popup>

